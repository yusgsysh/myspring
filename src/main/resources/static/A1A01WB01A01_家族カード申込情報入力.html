<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>株式会社　H　カード</title>
<!-- Bootstrap -->
<link href="css/bootstrap-4.0.0.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark"><a class="navbar-brand" href="#">カードサイト</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button>
    <div class="collapse navbar-collapse" >
        <ul class="navbar-nav mr-auto">
            <li class="nav-item"> <a class="nav-link" href="#">お手続き <span class="sr-only"></span></a> </li>
            <li class="nav-item"> <a class="nav-link" href="#">お問い合わせ</a> </li>
            <li class="nav-item"> <a class="nav-link" href="#">加盟店のお客様</a> </li>
        </ul>
    </div>
</nav>
<hr>
<div class="alert-danger text-center">
    <P class="card-text">家族カード申込情報のご入力</p>
</div>
<div class="container">
    <div class="row text-center"> </div>
    <hr>
    <form>
    <div class="row card-header">ご家族について</div>
    <div class="container">
        <div class="row">
            <div class="col-2 bg-aqua">
                <p>
                <ul class="list-inline">
                    <li class="list-inline-item">家族お名前</li>
                    <li class="list-inline-item"><img class="card-img card-img-top" src="images/icon_required.gif" alt="必須"></li>
                </ul>
                </p>
            </div>
            <div class="col-1 bg-lemonchiffon">
                <p>姓<br>
                    <br>
                    <br>
                    名</p>
            </div>
            <div class="col-3 bg-lemonchiffon">
                <input type="text" class="form-control" placeholder="<例>山田" name="kzkseikj" th:value="${session.kzkseikj}"/>
                <hr>
                <input type="text" class="form-control" placeholder="<例>祐希" name="kzkmeikj" th:value="${session.kzkmeikj}"/>
            </div>
            <div class="col-6 bg-lemonchiffon">
                <p><small>・このカードは個人名義でお申し込みください。<br>
                    ・システムの都合上、入力された一部の文字が変換されて登録されるケースがあります。<br>
                    ・本人確認書類と同じ表記で入力してください。<br>
                    ・15文字以内で入力してください。</small></p>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col-2 bg-aqua">
                <p>
                <ul class="list-inline">
                    <li class="list-inline-item">家族お名前<br>
                        フリガナ</li>
                    <li class="list-inline-item"><img class="card-img card-img-top" src="images/icon_required.gif" alt="必須"></li>
                </ul>
                </p>
            </div>
            <div class="col-1 bg-lemonchiffon">
                <p>姓<br>
                    <br>
                    <br>
                    名</p>
            </div>
            <div class="col-3 bg-lemonchiffon">
                <input type="text" class="form-control" placeholder="<例>ヤマダ" name="kzkseikn" th:value="${session.kzkseikn}"/>
                <hr>
                <input type="text" class="form-control" placeholder="<例>ユウキ" name="kzkmeikn" th:value="${session.kzkmeikn}"/>
            </div>
            <div class="col-6 bg-lemonchiffon"></div>
        </div>
        <br>
        <div class="row">
            <div class="col-2 bg-aqua">
                <p>
                <ul class="list-inline">
                    <li class="list-inline-item">ローマ字名</li>
                    <li class="list-inline-item"></li>
                </ul>
                </p>
            </div>
            <div class="col-1">
                <p>姓<br>
                    <br>
                    <br>
                    名</p>
            </div>
            <div class="col-3">
                <input type="text" class="form-control" name="kzkseien" th:value="${session.kzkseien}"/>
                <hr>
                <input type="text" class="form-control" name="kzkmeien" th:value="${session.kzkmeien}"/>
            </div>
            <div class="col-6">
                <p><small>・ローマ字名はカード券面に名・姓の順で印字されます。<br>
                    ・ローマ字名の表記をご確認のうえ、変更が必要な場合は直接入力してください。<br>
                    ・ローマ字は入力制限文字数以内で自動変換しています。自動変換後にお名前（フリガナ）を修正された場合は、ローマ字名も修正してください。<br>
                    ・入力制限文字数を超える場合は、ご希望の省略名に修正してください。<br>
                    ＜省略例＞YAMAMOTO　KAZUO　→　YAMAMOTO　K</small></P>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col-2 bg-aqua">
                <p>
                <ul class="list-inline">
                    <li class="list-inline-item">性別</li>
                    <li class="list-inline-item"><img class="card-img card-img-top" src="images/icon_required.gif" alt="必須"></li>
                </ul>
                </p>
            </div>
            <div class="col-4 bg-lemonchiffon">
                <div class="custom-control custom-radio custom-control-inline">
                    <input type="radio" class="custom-control-input" id="customRadio1" name="kzksex" th:checked="${session.kzksex eq '1' ? true : false}">
                    <label class="custom-control-label" for="customRadio1">男性</label>
                </div>
                <div class="custom-control custom-radio custom-control-inline">
                    <input type="radio" class="custom-control-input" id="customRadio2" name="kzksex" th:checked="${session.kzksex eq '0' ? true : false}">
                    <label class="custom-control-label" for="customRadio2">女性</label>
                </div>
            </div>
            <div class="col-6 bg-lemonchiffon"></div>
        </div>
    </div>
    <hr>
    <div class="row card-header">家族勤務先について</div>
    <div class="container">
        <div class="row">
            <div class="col-2 bg-aqua">
                <p>
                <ul class="list-inline">
                    <li class="list-inline-item">業種</li>
                    <li class="list-inline-item"><img class="card-img card-img-top" src="images/icon_required.gif" alt="必須"></li>
                </ul>
                </P>
            </div>
            <div class="col-4 bg-lemonchiffon">
                <div class="form-group">
                    <select class="form-control" name="kzkgyocd"  placeholder="<例>農林水産" th:value="${session.kzkgyocd}">
                        <option>農林水産</option>
                        <option>土木建築</option>
                        <option>製造</option>
                        <option>電気・ガス・水道</option>
                        <option>運輸・通信</option>
                        <option>無職</option>
                        <option>その他</option>
                    </select>
                </div>
            </div>
            <div class="col-6 bg-lemonchiffon"> </div>
        </div>
        <br>
        <div class="row">
            <div class="col-2 bg-aqua">
                <p>
                <ul class="list-inline">
                    <li class="list-inline-item">勤務先名</li>
                </ul>
                </P>
            </div>
            <div class="col-4">
                <input type="text" class="form-control" placeholder="<例>株式会社　H" name="kzkkms" th:value="${session.kzkkms}"/>
            </div>
            <div class="col-6"> </div>
        </div>
        <br>
        <div class="row">
            <div class="col-2 bg-aqua">
                <p>
                <ul class="list-inline">
                    <li class="list-inline-item">勤務先部課名</li>
                </ul>
                </p>
            </div>
            <div class="col-4">
                <input type="text" class="form-control" placeholder="<例>第一事業部" name="kzkkmsdep" th:value="${session.kzkkmsdep}"/>
            </div>
            <div class="col-6"></div>
        </div>
        <br>
        <div class="row">
            <div class="col-2 bg-aqua">
                <p>
                <ul class="list-inline">
                    <li class="list-inline-item">勤務先電話</li>
                </ul>
                </p>
            </div>
            <div class="col-4">
                <input type="text" class="form-control" placeholder="<例>03-1111-2222" name="kzkkmstel" th:value="${session.kzkkmstel}"/>
            </div>
            <div class="col-6"></div>
        </div>
    </div>
    <hr>
    <div class="row card-header">家族情報登録</div>
    <div class="container">
        <div class="row">
            <div class="col-3 bg-aqua">
                <p>
                <ul class="list-inline">
                    <li class="list-inline-item">家族確認書類確認方法</li>
                    <li class="list-inline-item"><img class="card-img card-img-top" src="images/icon_required.gif" alt="必須"></li>
                </ul>
                </p>
            </div>
            <div class="col-9">
                <div class="custom-control custom-radio custom-control-inline">
                    <input type="radio" class="custom-control-input" id="Radio8" name="kzkhhucd" th:checked="${session.kzksex eq '1' ? true : false}">
                    <label class="custom-control-label" for="Radio8">申込後</label>
                </div>
                <div class="custom-control custom-radio custom-control-inline">
                    <input type="radio" class="custom-control-input" id="Radio10" name="kzkhhucd" th:checked="${session.kzksex eq '0' ? true : false}">
                    <label class="custom-control-label" for="Radio10">郵送で登録</label>
                </div>
            </div>
        </div>
    </div>
    <hr>
    <div class="text-center">
        <div class="custom-control custom-radio custom-control-inline">
            <p class="lead"> <input type="button" value="次へ進む" onclick="check()"> </p>
        </div>
    </div>
    </form>
    <div class="row">
        <div class="text-center col-lg-6 offset-lg-3">
            <p>Copyright &copy; H &middot; All Rights Reserved &middot;</p>
        </div>
    </div>
</div>
</div>
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) --> 
<script src="js/jquery-3.2.1.min.js"></script> 
<!-- Include all compiled plugins (below), or include individual files as needed --> 
<script src="js/popper.min.js"></script> 
<script src="js/bootstrap-4.0.0.js"></script>
<script>
    function  check(){
        // document.querySelector('.btn-danger').addEventListener('click', function(event) {
        // 防止默认事件
        event.preventDefault();


        let errors = [];

        // 检查家族お名前の姓是否为空
        let kzkseikj = document.querySelector('input[placeholder="<例>山田"]').value;
        let fullWidthRegex = /^[一-龯]+$/; // 正则表达式：匹配全角字符

        if (!kzkseikj) {
            errors.push('家族お名前の姓は必須です。');
        }else if (!fullWidthRegex.test(kzkseikj)) {
            errors.push('家族お名前の姓は全角文字で入力してください。');
        }

        // 检查家族お名前の名是否为空且是否为汉字
        let kzkmeikj = document.querySelector('input[placeholder="<例>祐希"]').value;
        if (!kzkmeikj) {
            errors.push('家族お名前の名は必須です。');
        }else if (!fullWidthRegex.test(kzkmeikj)) {
            errors.push('家族お名前の名は全角文字で入力してください。');
        }

        // 检查家族お名前フリガナの姓是否为空且是否为平假名或片假名
        let kzkseikn = document.querySelector('input[placeholder="<例>ヤマダ"]').value;
        let kanaRegex = /^[あ-んア-ン]+$/;
        if (!kzkseikn) {
            errors.push('家族お名前フリガナの姓は必須です。');
        }else if (!kanaRegex.test(kzkseikn)) {
            errors.push('家族お名前フリガナの姓は平仮名または片仮名で入力してください。');
        }

        // 检查家族お名前フリガナの名是否为空
        let kzkmeikn = document.querySelector('input[placeholder="<例>ユウキ"]').value;
        if (!kzkmeikn) {
            errors.push('家族お名前フリガナの名は必須です。');
        }else if (!kanaRegex.test(kzkmeikn)) {
            errors.push('家族お名前フリガナの名は平仮名または片仮名で入力してください。');
        }

        // ローマ字名の姓 ローマ字名の名 是否为半角英文字符
        let kzkseien = document.querySelector('input[name="kzkseien"]').value;
        let kzkmeien = document.querySelector('input[name="kzkmeien"]').value;
        let halfWidthRegex = /^[a-zA-Z0-9\s]+$/; // 正则表达式：匹配半角英数字符和空格

        if (!halfWidthRegex.test(kzkseien)) {
            errors.push('ローマ字名の姓は半角英字で入力してください。');
        }
        if (!halfWidthRegex.test(kzkmeien)) {
            errors.push('ローマ字名の名は半角英字で入力してください。');
        }

        // 检查性别是否已选择
        let sexchecked1 = document.getElementById('customRadio1')
        let sexchecked2 = document.getElementById('customRadio2')
        let gender;
        if (sexchecked1.checked){
            gender = 1
        } else if (sexchecked2.checked){
            gender = 0
        }else {
            errors.push('性別を選択してください。')
        }

        // let genderSelected =document.querySelectorAll('input[name="kzksex"]');
        // alert(genderSelected.values())
        // let genderSelected = false;
        // let gender = '';
        // for (let radio of genderRadios) {
        //     if (radio.checked) {
        //         genderSelected = true;
        //         gender = 0;
        //         break;
        //     } else {
        //         gender = 1;
        //     }
        // }
        // if (gender === 3) {
        //     errors.push('性別を選択してください。');
        // }

        let kzkgyocd = document.querySelector('select[name="kzkgyocd"]').value;

        //勤務先名 勤務先部課名 勤務先電話
        let kzkkms = document.querySelector('input[name="kzkkms"]').value;
        let kzkkmsdep = document.querySelector('input[name="kzkkmsdep"]').value;
        let kzkkmstel = document.querySelector('input[name="kzkkmstel"]').value;
        if (!fullWidthRegex.test(kzkkms)) {
            errors.push('勤務先名は全角文字で入力してください。');
        }
        if (!fullWidthRegex.test(kzkkmsdep)) {
            errors.push('勤務先部課名は全角文字で入力してください。');
        }
        if (!halfWidthRegex.test(kzkkmstel)) {
            errors.push('勤務先電話は半角英字で入力してください。');
        }

        // 检查家族確認書類確認方法是否已选择
        let kzkhhucdchecked1 = document.getElementById('Radio8')
        let kzkhhucdchecked2 = document.getElementById('Radio10')
        let kzkhhucd;
        if (kzkhhucdchecked1.checked){
            kzkhhucd = 1
        } else if (kzkhhucdchecked2.checked){
            kzkhhucd = 0
        }else {
            errors.push('家族確認書類確認方法を選択してください。')
        }
        // let kzkhhucdRadios = document.querySelectorAll('input[name="kzkhhucd"]');
        // let kzkhhucdSelected = false;
        // let kzkhhucd = '';
        // for (let radio of kzkhhucdRadios) {
        //     if (radio.checked) {
        //         kzkhhucdSelected = true;
        //         kzkhhucd = 0;
        //         break;
        //     } else {
        //         kzkhhucd = 1;
        //     }
        // }

        // if (kzkhhucd === 3) {
        //     errors.push('家族確認書類確認方法を選択してください。');
        // }

        // 如果有错误，显示弹窗
        if (errors.length > 0) {
            alert(errors.join('\n'));
            // window.location.href = 'A1A01WA01A04_入会申込情報入力.html';
        } else {
            let urlParams = new URLSearchParams({
                kzkseikj: kzkseikj,
                kzkmeikj: kzkmeikj,
                kzkseikn: kzkseikn,
                kzkmeikn:kzkmeikn,
                kzkseien:kzkseien,
                kzkmeien:kzkmeien,
                kzksex: gender,
                kzkgyocd:kzkgyocd,
                kzkkms:kzkkms,
                kzkkmsdep:kzkkmsdep,
                kzkkmstel:kzkkmstel,
                kzkhhucd:kzkhhucd,
            });
            // 所有必填项都已填写，跳转到新页面
            // console.log(email,emailConfirm)

            // window.location.assign('/insert1');
            window.location.href='/KZKinsert?'+urlParams.toString() ;
            // window.location.assign('/insert1',{'eamil':email}) ;

        }
        // })
    }
</script>
</body>
</html>
